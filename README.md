# TCP_IP_FINAL

201844002 고승우 

1. 개요 및 목적
멀티쓰레드와 소켓통신을 활용한 가장 기본적인 주제가 채팅시스템이라 생각이 들어 다중접속이 가능한 단체 채팅방을 구현하였습니다.

시작 전, 제가 구상한 서버와 클라이언트의 기능은 아래와 같습니다.
 - 서버
최대 접속 인원 수 설정, 공지 메시지 전송

 - 클라이언트
닉네임, 접속 할 서버 선택하여 입장, 채팅, 접속중인 멤버 표시, 나가기


2. 설계 및 기능
 - 서버
memberThread : 반복적으로 접속중인 멤버 리스트를 클라이언트로 전달시켜주는 쓰레드입니다.
recvandsendThread : 반복적으로 클라이언트로부터 데이터를 전달받는 쓰레드입니다. 또한 전달받은 메시지의 종류를 판별하여 다시 모든 클라이언트로 전달시켜줍니다.

 - 클라이언트
recvmsgthread : 마찬가지로 반복적으로 서버로부터 데이터를 전달받는 쓰레드입니다. 서버와 마찬가지로 전달받은 데이터를 판별하여 알맞는 함수를 실행시켜줍니다. 

클라이언트에서 서버로 전달하는 데이터의 종류는 두 가지 입니다.
  1) 채팅 : 메시지의 판별을 위해 문자열 앞에 "recv)"를 붙여 전달하게 했으며, 해당 데이터를 다시 모든 클라이언트로 전달합니다.
  2) 입장 메시지 : 클라이언트가 서버에 접속했을때 전달받는 데이터이며, 클라이언트에서 설정한 닉네임들 전달 받습니다. 또한 해당 클라이언트가 접속했다는 데이터를 모든 클라이언트로 전달합니다.
반대로 서버에서 클라이언트로 전달하는 데이터의 종류도 두가지입니다.
  1) 메시지 : 데이터의 판별을 위해 앞에 "msg)"를 붙여 전달하게 하였으며, 클라이언트에서 채팅창에 표시할 채팅입니다. 메시지를 전달받은 클라이언트는 해당 메시지를 채팅창에 출력하게 하였습니다.
  2) 멤버 리스트 : 데이터의 판별을 위해 앞에 "mem)"를 붙여 전달하게 하였으며, 서버에서 멤버리스트를 지속적으로 클라이언트로 전달해줍니다. 멤버 리스트를 전달받은 클라이언트는 화면에 반복적으로 멤버 리스트를 갱신시켜주게 하고자 하였습니다.
 
![image](https://user-images.githubusercontent.com/71147074/122314167-a0faf000-cf52-11eb-92c5-748223ccd88e.png)
서버의 기본 실행 화면입니다.
원래는 서버에서도 여러가지 기능을 추가하고자 하였지만 해보지 못하였습니다.


![image](https://user-images.githubusercontent.com/71147074/122314131-8d4f8980-cf52-11eb-9167-20b60d321406.png)
클라이언트를 실행하면 표시되는 채팅창 입장 gui입니다.
접속할 서버의 ip address와 닉네임을 설정하여 입장 할 수 있습니다.

![image](https://user-images.githubusercontent.com/71147074/122314342-fa631f00-cf52-11eb-91db-0011c3f50f3d.png)
잘못된 아이피 주소를 입력하였을때의 처리 화면입니다.

![image](https://user-images.githubusercontent.com/71147074/122314377-0818a480-cf53-11eb-8e10-4821f9b6ed29.png)
닉네임을 입력하지 않았을 때의 처리 화면입니다.

![image](https://user-images.githubusercontent.com/71147074/122314436-25e60980-cf53-11eb-9c02-973acbfdcf68.png)
정상적으로 채팅창으로 접속했을때의 서버와 클라이언트의 화면입니다.
클라이언트가 서버로 접속할때 설정한 닉네임을 전달하며, 다시 서버는 닉네임을 모든 클라이언트로 전달하여 화면에 출력하게 합니다.

![image](https://user-images.githubusercontent.com/71147074/122314575-65145a80-cf53-11eb-83cd-b8a5650cfa33.png)
여러 클라이언트가 접속을 시도하여도 똑같이 작동합니다.

![image](https://user-images.githubusercontent.com/71147074/122314632-837a5600-cf53-11eb-93ea-6ff05e9aa8e2.png)
메시지의 전송도 같은 입장 메시지와 동일한 방식으로 처리하였습니다.


3. 문제점
1) 조잡한 파이썬 코딩 : 파이썬 코딩이 익숙치 않아 전체적인 코드의 구성과 gui가 많이 엉성합니다.
  특히 반복적으로 접속중인 멤버 리스트를 전달받아 클라이언트의 화면에 멤버 리스트를 출력해주고자 하였는데, 멤버 리스트를 전달받는것까진 문제가 없었지만 화면에 출력하는 과정에서 적절한 방법을 찾지 못해 해당 기능을 추가하지 못하였습니다.
3) 구상하였던 서버의 기능과 클라이언트의 나가는 기능을 구현하지 못했습니다.
